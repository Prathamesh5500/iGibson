FROM nvcr.io/nvidian_general/tensorflow:18.05-py3-qa_402789

RUN apt-get update && apt-get install -y curl

# Install miniconda to /miniconda


RUN pip install torch
RUN pip install torchvision
RUN pip install tensorflow==1.3

RUN apt-get install -y git build-essential cmake libopenmpi-dev 
		
RUN apt-get install -y zlib1g-dev

RUN apt-get update && apt-get install -y \
		libglew-dev \
		libglm-dev \
		libassimp-dev \
		xorg-dev \
		libglu1-mesa-dev \
		libboost-dev \
		mesa-common-dev \
		freeglut3-dev \
		libopenmpi-dev \
		cmake \
		golang \
		libjpeg-turbo8-dev \
		wmctrl \ 
		xdotool 

RUN  apt-get install -y vim wget unzip 

RUN  apt-get install -y libzmq3-dev

WORKDIR /workspace

RUN git clone https://github.com/StanfordVL/GibsonEnv.git

RUN pip install -e GibsonEnv

WORKDIR /workspace/GibsonEnv/gibson

RUN wget -q https://storage.googleapis.com/gibsonassets/assets_core_v2.tar.gz

RUN tar -zxf assets_core_v2.tar.gz && rm assets_core_v2.tar.gz

WORKDIR /workspace/GibsonEnv
RUN bash build.sh build_local

RUN chmod -R a+w /workspace
